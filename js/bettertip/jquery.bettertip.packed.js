$(BT_init);var BT_default_width=350;var BT_open_wait=500;var BT_close_wait=0;var BT_cache_enabled=true;var BT_events=new Array();var BT_titles=new Array();function BT_init(){$("a.betterTip").parent("div.betterTip").hover(function(){BT_hoverIn($(this).children("a.betterTip")[0]);return false},function(){BT_hoverOut($(this).children("a.betterTip")[0])});$("a.betterTip").filter(function(a){return $(this).parent("div.betterTip").length==0}).hover(function(){BT_hoverIn(this)},function(){BT_hoverOut(this)})}function BT_setOptions(a){if(a["openWait"]!=null)BT_open_wait=a["openWait"];if(a["closeWait"]!=null)BT_close_wait=a["closeWait"];if(a["cacheEnabled"]!=null)BT_cache_enabled=a["cacheEnabled"]}function BT_hoverIn(a){var b=BT_open_wait;if($('#BT_cache_'+a.id).length>0)b=0;var c=a.title;if(!BT_titles[a.id]){if(!c||c.toLowerCase()=="$none")c="";else if(c.toLowerCase()=="$content")c=$(a).text();BT_titles[a.id]=c;a.title=""}BT_events[a.id]=1;setTimeout(function(){BT_show(a.id)},BT_open_wait)}function BT_hoverOut(a){BT_events[a.id]=0;setTimeout(function(){BT_remove()},BT_close_wait)}function BT_remove(){$('#BT').remove()}function BT_show(b){if(BT_events[b]==0)return;var c=$("#"+b);var d='';if(BT_base_url!=''){var e=b.split("_",2);var f=e[1];d=BT_base_url+f}else{d=c[0].href}var g=BT_titles[b];$("#BT").remove();var h=$("#"+b).parent("div.betterTip");if(h.length>0)b=$("#"+b).parent("div.betterTip")[0].id;c=$("#"+b);var i=true;if(g.length==0)i=false;var j=d.split("\?",2);var k=BT_parseQuery(j[1]);j[0]=j[0].substr(j[0].lastIndexOf('/')+1);if(!k["width"]||k["width"].length==0)k["width"]=BT_default_width;var l=parseInt(k["width"]);var m=BT_getLeft(b);var n=BT_getWidth(b);var o=m+n+12;var p=BT_getTop(b);var q="left";var r=self.innerWidth||(document.documentElement&&document.documentElement.clientWidth)||document.body.clientWidth;var s=m+n+11+l+20;var t=-10;var u=-3;var v=-7;var w=-7;if(r<s){q="right";o=m-12-l;t=l;u=-1;if(document.all)t-=2}else if(i)u=-2;if(i)q="title_"+q;$("body").append("<div id='BT' class='BT_shadow0' style='top:"+(p-v-8)+"px; left:"+(o-w-8)+"px;'>"+"<div class='BT_shadow1'>"+"<div class='BT_shadow2'>"+"<div id='BT_main' style='width:"+k["width"]+"px; top:"+v+"px; left:"+w+"px;'>"+"<div id='BT_arrow_"+q+"' style='top: "+u+"px; left:"+t+"px;'></div>"+(i?"<div id='BT_title'>"+g+"</div>":"")+"<div style='padding:5px'>"+"<div id='BT_content'>"+"<div class='BT_loader'></div>"+"</div>"+"</div>"+"<div id='BT_bottom_arrow_"+q+"' style='display:none; top: 30px; left:"+t+"px;'></div>"+"</div></div></div></div>");if(j[0].charAt(0)=='$'){$('#BT_content').html($("#"+j[0].substr(1)).html());$('#BT').show();BT_checkBounds()}else if(BT_cache_enabled){if($('#BT_cache_'+b).length>0)BT_loadCache(b);else $.post(d,{},function(a){BT_createCacheElement(b,a)})}else{$.post(d,{},function(a){$('#BT_content').html(a);$('#BT').show();BT_checkBounds()})}}function BT_checkBounds(){var a=$(window).scrollTop();var b=$(window).height();var h=$('#BT');var c=h.height();var d=h.offset();var e=d.top;if(a+b<c+d.top){var f=c-35;e-=c-31;$('#BT').css({top:e+'px'}).addClass("viewport-bottom");$('#BT_arrow_left').hide();$('#BT_arrow_right').hide();$('#BT_bottom_arrow_left').show().css({top:f+'px'});$('#BT_bottom_arrow_right').show().css({top:f+'px'})}}function BT_createCacheElement(a,b){$("body").append("<div id='BT_cache_"+a+"' style='display:none'>"+b+"</div>");BT_loadCache(a)}function BT_loadCache(a){$('#BT_content').html($('#BT_cache_'+a).html());$('#BT').show();BT_checkBounds()}function BT_getWidth(a){var x=document.getElementById(a);return x.offsetWidth}function BT_getLeft(a){var b=$('#'+a)[0];var c=b.offsetLeft;var d=b.offsetParent;while(d){c+=d.offsetLeft;d=d.offsetParent}return c}function BT_getTop(a){var b=$('#'+a)[0];var c=b.offsetTop;var d=b.offsetParent;while(d){c+=d.offsetTop;d=d.offsetParent}return c}function BT_parseQuery(a){var b=new Object();if(!a)return b;var c=a.split(/[;&]/);for(var i=0;i<c.length;i++){var d=c[i].split('=');if(!d||d.length!=2)continue;var e=unescape(d[0]);var f=unescape(d[1]);f=f.replace(/\+/g,' ');b[e]=f}return b}